# 项目发布——商户管理端

- [测试服](https://timp.hubcf.com/lottery/merchant/manager/)
- [正式服](https://merchant.cwlcn.cn/)

商户管理平台 [merchantmanage](merchant/manager)
merchantmanage-test
merchantmanage-release

## 发布日志

---

商户管理平台 [merchantmanage](merchant/manager)

1. 登录注册密码重置等页面
2. 管理员账号管理页
3. 账号登录日志页
4. 参数配置服务状态页
5. 商户管理
   - 商户管理页
   - 商户账号管理页
   - 商户兑换券管理页
   - 商户权益管理页

发布时间: 2023/05/17 19:00

---

商户管理平台 [merchantmanage](merchant/manager)

1. 补充更多的奖金权益选项

发布时间: 2023/07/12 14:30

---

<!-- 商户管理平台 (merchantmanage)[merchant/manager]

1. 商户管理端弹窗页面的样式适配处理
2. 商户管理端补充权益映射
3. 商户管理端 [优化] 商户管理对应抽屉子页面的样式
4. 商户管理端 [改造] 菜单模块更新
5. 商户管理端 [新增 ing] 权限管理 => 权限管理子页面菜单配置 & 枚举数据更新
6. 商户管理端 [新增 ing] 权限管理 => 权限管理相关的接口文件整理
7. 商户管理端 [新增 ing] 权限管理 => 新增权限管理相关页面文件
8. 商户管理端 [新增 ing] 权限管理 => 权限管理相关页面表字段更新
9. 商户管理端 [新增 ing] 权限管理 => 权限配置页面去除重复的页面标题
10. 商户管理端 [新增 ing] 用户中心 => 用户管理相关页面
11. 商户管理端 [新增 ing] 核销兑换券相关页面
12. 商户管理端 [新增 ing] 商户管理 => 权益管理相关页面
13. 商户管理端 [新增 ing] 修复兑换券管理 & 权益管理新建/编辑空指针报错
14. 权益管理菜单图标文件
15. 商户管理端 [新增 ing] 兑换券管理 & 权益管理数据分页请求处理
16. 商户管理端 [新增 ing] 用户管理 => 分页 & 搜索 & 功能按钮等内容
17. 权限类型 => 角色管理数据的展示问题排查
18. 商户管理端 [新增 ing] 创建用户添加选择商户 & 选择角色表单项
19. 商户管理端 [新增 ing] 创建用户选择商户和角色选择的联动
20. 商户管理端 [新增 ing] 用户管理 => 联表查询商户名 & 用户角色
21. 商户管理端 [新增 ing] 用户管理条件查询逻辑
22. 商户管理端 [调整] 商户管理 => 添加商户类型创建字段 & 搜索条件 & 表格展示
23. 商户管理端 [优化] 提取商户数据处理方法集合
24. 商户管理端 [优化] 用户管理 => 简化商户相关选择下拉选项数据处理
25. 商户管理端 [新增 ing] 核销兑换券 => 搜索 & 展示内容 & 新增逻辑补充
26. 商户管理端 [新增 ing] 权益管理 => 搜索 & 展示内容 & 新增逻辑补充
27. 商户管理端 [优化] 核销明细相关页面 => 添加核销账号搜索
28. 商户管理端 [新增] 认证管理 => 认证审核页面
29. 商户管理端 [新增] 认证管理 => 审核相关接口调用 & 联表查询相关数据
30. 商户管理端 [新增 ing] 用户管理 => 打开认证审核页面标签
31. 商户管理端 [新增] 用户管理 => 认证信息展示弹窗

发布时间: 2023/08/21 11:30 -->

商户管理平台 [merchantmanage](merchant/manager)

1. [优化] 商户管理对应抽屉子页面的样式
2. [调整] 商户管理 => 添加商户类型创建字段 & 搜索条件 & 表格展示
3. [新增] 权限管理板块 => 权限配置相关页面
4. [新增] 用户中心 => 用户管理相关页面
5. [新增] 用户中心 => 认证审核相关页面
6. [新增] 兑换券管理 => 核销兑换券相关页面

发布时间: 2023/09/01 16:00

---

商户管理平台 [merchantmanage](merchant/manager)

[新增] 权益管理 => 权益类型管理页
[新增] 权益管理 => 权益兑现管理页
[新增] 权益管理 => 兑现记录查询页
[新增] 参数配置 => 中奖权益设置页
[优化] 所有中奖权益相关的金额枚举改为使用接口请求的数据
[优化] 权益兑现记录的状态的样式区分
[调整] 兑现记录的兑现状态数据更换数据源
[修复] 权益相关金额单位之间的转换问题
[修复] 权益名称和权益收益混淆的问题
[修复] 日期选择组件少于三级区域的回显数据错误
[优化] 权益兑现记录的门店联系人使用手机号+用户名的组合展示
[优化] 权益价值 & 权益预算 & 权益余额相关的表单数据校验
[新增] 添加商户在小程序端的登录日志

<!-- [新增] 兑换券核销明细下载功能 -->
<!-- [开发] 更新权益管理板块的菜单目录 -->
<!-- [新增] 兑现记录查询页,完成基本页面结构和交互逻辑
[开发] 权益兑现记录查询页面搜索和展示内容整理
[开发] 兑现记录查询页更新搜索和表格配置字段
[开发] 添加权益类型管理毛坯页
[开发] 权益类型管理页更新搜索和表格配置字段
[开发] 添加兑现权益管理毛坯页
[开发] 权益类型管理页查询权益明细逻辑
[开发] 权益类型管理枚举数据映射处理
[开发] 权益类型管理添加权益弹窗表单内容处理
[开发] 权益类型管理完成新增和编辑权益数据对接 & 优化交互
[开发] 权益类型管理完成新增和编辑权益数据对接 & 优化交互
[开发] 权益类型管理页展示数据逻辑判断 & 格式化
[开发] 兑现权益管理页面搜索,表格展示,查询等内容的处理
[修复] 权益类型管理删除操作 & 过滤已删除项
[开发] 兑现权益管理页权益状态处理 & 兑现权益相关的接口整理
[开发] 兑现权益管理页权益发放弹窗表单内容的处理
[开发] 兑现记录查询页整理接口数据字段
[开发] 兑现权益管理页权益发放弹窗添加权益类型表格展示组件 & 权益选择组件
[开发] 兑现权益管理页权益发放弹窗资源分类选择交互(多选)
[开发] 兑现权益管理页权益发放弹窗表单数据字段整理匹配
[开发] 兑现权益管理页权益发放弹窗发放区域相关的数据处理
[开发] 兑现权益管理页权益发放弹窗时间选择和地址选择数据解析 & 表单提交参数整理
[开发] 资源分组 & 预算余额相关数据处理 & 编辑数据初步映射
[修复] 兑现权益管理页权益类型选择组件单选逻辑问题
[开发] 兑现权益管理页权益发放弹窗权益类型对应的表单提交数据处理
[开发] 兑现权益管理页权益发放弹窗权益类型变化时数据格式化
[开发] 兑现权益管理页权益发放弹窗权益类型表格数据校验 & 提交新增
[开发] 兑现权益管理页发放范围/时间/资源分类等数据查询 & 格式化
[开发] 兑现权益管理页数据`权益状态`查询逻辑
[开发] 兑现权益管理页权益发放编辑数据回显匹配逻辑
[开发] 兑现权益管理页权益发放编辑起止日期 & 预算额度数据的处理
[开发] 兑现权益管理页权益发放编辑删除权益类型 & 修复数据匹配问题
[开发] 兑现权益管理类型报错处理 & 代码注释整理
[开发] 兑现权益管理页添加兑现明细展示弹窗
[开发] 兑现权益管理的权益类型表格组件提供编辑和展示模式适配兑现详情展示
[开发] 兑现权益管理的权益兑现明细样式优化 & 代码整理
[开发] 查询权益兑现记录接口字段 & 表格展示内容整理更新
[开发] 查询权益兑现记录表格展示数据格式化
[开发] 查询权益兑现记录数据搜索相关的参数处理
[开发] 权益兑现记录查询 => 门店联系人信息处理
[开发] 权益兑现记录查询 => 服务商 & 站点信息匹配处理
[开发] 权益兑现记录兑现状态查询 & 数据处理
[开发] 菜单 & 枚举数据更新 -->
<!-- [优化] 中奖权益相关的命名描述调整
[开发] 中奖权益设置添加权益类型
[调整] 权益兑现记录兑换券兑换的商品信息数据处理
[优化] 权益兑现记录的状态的样式区分 -->
<!-- [开发] 添加 dls 接口请求相关的内容
[开发] 使用定制接口获取站点兑现数据
[优化] 编辑兑现权益的交互优化 -->
<!-- [优化] 统一时间日期格式化工具
[优化] 整理 utils 工具 & 统一时间格式化方法
[整理] 将 exportExcel 工具统一到 package 中
[整理] 新接口请求封装 getViewObjsByDsl 的优化统一 -->

发布时间: 2023/10/23 17:00

---

商户管理平台 [merchantmanage](merchant/manager)

[优化] 权益管理/权益类型管理页添加兑现规则展示
[优化] 权益管理/权益兑现管理页添加权益发放修改权益数量限制
[优化] 权益管理/权益兑现管理页选择权益类型表格分页 & 弹窗样式优化

发布时间: 2023/10/23 18:00

---

商户管理平台 [merchantmanage](merchant/manager)

- [新增] 权限管理/平台用户权限
- [新增] 权限管理/商户平台权限
- [新增] 平台管理/商户小程序登录日志
- [新增] 平台管理/商户平台登录日志
- [新功能] 权益管理/兑现记录查询添加明细下载功能
- [优化] 管理端使用平台用户分配的权限菜单替换之前的本地配置
- [优化] 登录/忘记密码/重置密码等区分平台账号和商户账号的逻辑
- [优化] 控制登录时效为一天(保证用户权限能得到及时同步)
- [优化] 商户登录平台时缓存商户ID & 作为登录商户得默认筛选条件请求数据
- [优化] 商户/用户/角色/权限相关的命名统一
- [优化] 权限管理/子菜单对应得角色分类禁用增删操作
- [优化] 商户中心/商户管理的商户类型用接口数据替换本地枚举配置
- [修复] 修复平台登录时初始化商户ID值undefined序列化后导致的布尔判单错误的问题
- [修复] 修复权益兑现记录为空触发还触发下载的问题
- [修复] 新增商户角色报错 & 编辑商户角色切换商户类型数据更新条件错漏得问题
- [修复] 权限管理下删除角色字段不存在的报错
- [修复] 平台管理/添加平台用户关联平台类型及平台角色的联动数据
- [优化] 平台管理/平台用户平台类型和平台角色数据回显匹配
- [优化] 权限管理/平台用户的角色去除新增和删除功能 & 限制编辑

<!-- - [x] 商户管理端 => 权限管理
  - [x] 权限添加管理端类型,和小程序端分开管理
    - [x] [开发] 商户管理端 => 更新菜单结构
    - [x] [开发] 商户管理端 => 添加管理端权限配置相关页面
    - [x] [开发] 商户管理端 => 权限配置获取菜单/分类/角色数据按应用平台进行数据隔离
    - [x] [开发] 商户管理端 => 角色管理页获取角色相关数据的整合
    - [x] [开发] 商户管理端 => 角色管理页账户类型选择数据的处理
    - [x] [开发] 商户管理端 => 优化权限配置相关页面的表格样式
    - [x] [开发] 商户管理端 => 权限管理相关的接口整理优化
    - [-] [优化] zzwlUI => 两套权限系统的兼容
    - [x] [开发] 商户管理端 => 编辑角色分类的分配权限菜单数据隔离
    - [x] [开发] 商户管理端 => 权限管理相关的增/删/改逻辑接口处理
    - [x] [开发] 商户管理端 => 权限管理/菜单管理相关数据对接处理
    - [x] [开发] 商户管理端 => 权限管理/角色分类相关数据对接处理
    - [x] [开发] 商户管理端 => 权限管理/角色管理相关数据对接处理
      // 1: Wx 小程序, 2: Admin 管理端
      // 菜单: t_backend_node_platform_type
      // 分类: t_user_a_type_platform_type
      // 角色: t_role_platform_type

  - [x] [开发] 商户管理端 => 商户中心/用户管理更新用户角色数据获取
  - [x] [开发] 商户管理端 => 更新菜单配置
  - [x] [开发] 商户管理端 => 调整权限类型枚举相关的映射逻辑
  - [x] [开发] 商户管理端 => 平台账号管理子账号关联用户角色属性
  - [x] [开发] 商户管理端 => 登录获取权限菜单 & 菜单数据匹配处理
  - [x] [开发] 商户管理端 => 页面功能按钮统一开放角色权限的配置
  - [x] [开发] 商户管理端 => 更新菜单配置 & 素材
  - [x] 商户平台权限管理
    - [x] [开发] 商户管理端 => 创建商户平台权限管理 & 商户登录日志页面
    - [x] [开发] 商户管理端 => 添加商户平台权限管理相关的接口
    - [x] [开发] 商户管理端 => 商户平台权限数据对接 & 权限相关页面共用一个角色表格组件
    - [x] [拓展] 商户管理端 => 角色表格组件添加通过节点ID过滤菜单的选项
    - [x] [开发] 商户管理端 => 商户小程序和平台权限管理的角色管理逻辑处理
    - [-] 菜单需要平台类型区分
    - [-] 角色分类 & 角色平台类型为2(商户公用角色数据)
  - [-] 平台权限类型调整: 1:管理台 2:商户小程序 3:商户管理台
  - [x] 商户管理端 => 管理端登录页提供平台账号和商户账号选择的逻辑
  - [x] 商户管理端 => 商户登录平台的日志页面对接
  - [x] 商户管理端 => 管理端登录/忘记密码/重置密码等区分平台账号和商户账号的逻辑
  - [-] 商户管理端 => 添加登录平台字段: platformType
  - [-] 管理端修改密码需提供平台类型(平台/商户)
  - [-] login,password,reset_pwd, backend_node 请求参数增加platformType
  - [-] backend_node => 菜单节点主动查询更新
  - [x] 商户管理端 => 登录一天有效(每天需登录用户信息)
  - [x] 商户管理端 => 商户登录平台时缓存商户ID & 对商户数据筛选
  - [x] 商户管理端 => 权益兑现记录下载交互 & 数据请求
  - [x] 商户管理端 => 权益兑现记录下载数据格式化 & 配置
  - [x] 权益数据下载需要定制接口 => 新接口
    - [-] [https://timp.hubcf.com/lottery/merchantex/api/]
    - [-] [api13300.cwlcn.cn]
    - [-] 商户 ID => merchantId
    - [-] 时间: 默认当月一号至当天(最大范围31天)

- [x] 商户小程序 测试 & 问题修复
  - [x] [修复] 商户管理端 => 修复平台登录时初始化 ID 值导致的布尔判单错误的问题
  - [x] [修复] 商户管理端 => 修复权益兑现记录为空触发还下载的问题
  - [x] [优化] 商户管理端 => 商户/用户/角色/权限相关的命名统一
  - [x] [优化] 商户管理端 => 权限管理/角色分类禁用增删
  - [x] [优化] 商户管理端 => 商户管理的商户类型数据从接口获取 `merchantTypes`
  - [x] [修复] 商户管理端 => 新增商户角色报错 & 编辑商户角色切换商户类型数据更新问题 -->

发布时间: 2023/11/09 10:00

---

商户管理平台 [merchantmanage](merchant/manager)

1. [修复] 权益兑现管理编辑和详情空指针导致的错误
2. [修复] 权限管理/商户小程序和商户平台用户对应的商户类型权限节点数据覆写的情况
3. [修复] 权限管理/商户小程序和商户平台用户对应的商户角色权限取值 & 赋值问题

发布时间: 2023/11/10 18:20

---

商户管理平台 [merchantmanage](merchant/manager)

1. [修复] 平台管理/平台用户管理编辑账号时操作的账号ID取值问题

发布时间: 2023/11/14 09:30

---

商户管理平台 [merchantmanage](merchant/manager)

1. [优化] 系统三级等保问题(用户账号密码复杂度校验,登录,密码重置/初始化)

发布时间: 2023/11/14 18:30

---

商户管理平台 [merchantmanage](merchant/manager)

1. [修复] 商户管理端 => 兑现权益管理页跨平台调用token不匹配的问题

发布时间: 2023/11/16 18:45

---

商户管理平台 [merchantmanage](merchant/manager)

1. 登录页添加网安备相关信息

发布时间: 2023/12/29 17:00

---

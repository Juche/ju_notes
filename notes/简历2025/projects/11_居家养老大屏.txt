# 居家养老大屏

## 开发记录

1. 熟悉项目结构和机制
2. 居家养老大屏引入 sass2 项目的模板
3. 居家养老大屏组件封装
4. 表格列表组件 & 信息面板列表组件调整和样式优化
5. 提取样式主题色,配置 less 主题变量全局可用
6. 在 vue 原型上挂在 echarts, 以便在 echarts 配置单中通过 `new this.echarts.Xxx()` 的形式使用 echarts 上的构造方法
7. 项目素材整理 & 根据蓝湖配色整理主题色 & 主页公共部分编码
8. 面板组件初步封装
9. 页面布局 & 内容初步整理
10. 页面布局调整 & 组件更新
11. 两个 echarts 饼图组件
12. 新增一个信息展示组件 & 调整 ChartPieTaichi 组件
13. 页面布局调整
14. 页面宽高自适应布局
15. 数据概览页面添加标签切换内容 & 复写 ivu 标签切换组件的样式
16. 表格列表组件颜色调整
17. TimeDay 组件 bug 修复
18. 列表组件加入自动滚动组件控制
19. 页面适配值计算 & aMap 地图
20. aMap 缩放和定位中心点不生效的问题
21. 两个大屏页面整理
22. 表格列表组件添加一些优化选项(指定每列列宽/占比/文本超出处理)
23. 页面模拟数据提取
24. echarts 组件展示数据 & 颜色配置项提取
25. echarts 组件颜色配置项优化 => 提供部分配置的能力
26. 页面内容整理
27. 页面其他内容模拟数据接入
28. LargeNumInfo 组件逻辑整理
29. echarts 展示细节调整
30. 页面纵向高度适配调整
31. 对接后台登录接口
32. 接口整理,测试的能力
33. 字段映射表整理
34. 页面数据的整理分析
35. 数据对接更新
36. 数据转换方法更新 & 数据概览左侧数据对接处理
37. 监控页面左侧 echarts 数据对接处理
38. 数据转换方法更新
39. 添加新的数据映射数据
40. 对接家庭服务和管家服务的接口
41. 事件列表数据对接,数据部分处理
42. 更新数据处理方法
43. 地图区域之外的数据对接和处理
44. 监控页事件列表数据关联的异步处理
45. 内容的优化组织
46. 地图标记点信息和飞线调试
47. 调试 websocket 接口
48. 地图组件添加 Scatter 拓展
49. 飞线 & Scatter 在地图组件中实例化
50. 解决 new 创建飞线和 Scatter 类时调用 init 生成了对应 Layer 导致渲染出错的问题
51. 地图 marker 的绘制 & 模板抽取
52. 地图部分的数据展示和交互
53. 概览页平台用户和服务商用户界面编码
54. 页面和标签页切换的交互
55. 合并 sass2 的 store & enum & mixin 文件
56. 完成平台和服务商用户视图分离
57. 完成概览和监控页面地图对接后台数据
58. 实时监控页面接入 websocket 通讯
59. 优化页面显示问题
60. 解决滚动组件连续滚动的问题
61. 补充了页面漏掉的内容
62. 地图展示的调整
63. 完成新大屏展示样式优化 & 数据问题修复
64. 完成养老大屏两版代码合并
65. 新大屏问题优化/修复
  - add: listToChart 添加排序选项
  - 设备占比组件重写 & 数据计算
  - fixed: tableList 组件内容不超出不滚动
  - 一些定时器的清理
  - 抽取 CustBar 组件 & CustBar 组件初始化以及响应式动画效果
  - 补充 TableList 组件标题
66. 旧版养老大屏
  - 页面布局调整
  - 补充 datav.ico
  - 修复处理告警信息延后显示的问题
67. 新养老大屏的一些优化
  - 页面布局调整优化
  - 补充一些数据排序问题
  - 补充饼图配色不足
  - 页面视图切换的交互配置化,将配置项提取到 store
  - 新增页面配置组件 & 应用
68. 修复旧版养老大屏 bug
  - 修复旧大屏告警事件页面交互展示 bug
69. 修复登录页视图问题
70. 对接模板选择页
71. 实时监控页告警事件事件视图和数据编码
72. 添加告警事件模拟 & 多告警事件简单队列提醒
73. 实时监控家庭标记点及其交互
74. 监控页地图合适的缩放级别切换
75. 布局调整 => 两边收窄
76. 修复告警框样式问题 & 告警消息不消失的问题
77. 清除 v2 和 v1 的耦合
78. 新大屏告警事件交互 & 修复已知问题
   - 修复一些空指针报错问题
   - 修复两个地图视图交叉 => 地图组件分离
   - 告警语音播报处理
   - 告警事件队列处理
   - 告警推送的数据模拟更新,补充状态 4
79. 旧大屏内容调整
   - 补充完成评价流程的消息提示
   - 调整事件类型 && 已完成事件类型改为事件 status 1 和 2 的合集
80. 完成新大屏告警事件交互
81. 🚀 两个版本大屏最新代码合并 & 新大屏发布!!!
82. 统一新大屏补充视图的样式
83. 修复联大屏一些数据问题
84. 完成新大屏告警事件交互
85. 🚀 两个版本大屏最新代码合并 & 新大屏发布!!!
86. 统一新大屏补充视图的样式
87. 修复联大屏一些数据问题
88. 新大屏:
   - 解决评论不能显示 emoji 表情的问题
   - 添加短信验证码登录选项
89. 旧大屏:
   - 修复标记点数据和新接口返回值的匹配问题
   - 评论显示 emoji 表情的功能
90. 大屏更换新主题
91. 补充页面切换的交互和样式 & 补充新的页面路由
92. 项目整体效果调整
93. 统计报表页面的布局和内容填充(模拟数据展示)
94. 解决 ES 新特性报错的问题 => 更新相应依赖和配置
95. 修正页面路由标签激活项初始化展示
96. 统计页面 echarts 组件的兼容拓展
97. 统计页面样式的优化统一
98. 初步完成统计报表页数据对接
99. 统计报表页面发布
100. 统计报表页的调整
   - 管家综合评分数据对接处理
   - 守护人年龄分段数据更新
101. 数据一些容错处理
102. 日期和服务商条件筛选
103. 服务商信息界面 & 数据对接
104. 大屏优化 & 问题修复
   - 数据首次加载部分为空的问题
   - echarts 图表动画
   - echarts tooltip 超出截断问题
   - 管家评分为空的展示问题
   - 添加数据加载动画
   - 数据为空的占位修改
105. 服务商列表 & 服务商详情补充数据加载和为空的视图
106. 告警详情页 echarts 视图映射设备状态描述
107. 统计报表页面的接口调整
108. 给 ChartBarRow.vue 组件添加数据轮询动画
109. 页面修改尺寸后布局自适应
110. 页面显示优化
   - ChartBarRow 组件动画优化,只要从左到右的过程
   - ChartBarCol 组件添加 tooltip 轮播动画
   - 日期选择筛选 => 202111 月份之前 & 当前月份之后禁选
   - tabs 标签自动切换
   - ChartLine 动画 update 受干扰的问题
   - 调整地图飞线初始化出来时间长的问题
111. 修复 spInfo 面板管家数量获取的的问题
112. 服务商选择使用级联菜单
113. 调研高德地图 1.4 版本上绘制好看的 Loca 实例 => 没有相应的机制
114. 优化布局
115. 数据刷新机制问题查找修复
116. 添加消息推送的评分信息
117. 修复服务商子用户无法收到告警推送
118. 排查管家综合评分无数据问题

## 问题及解决思路

- 遇到了什么问题
  1.  想要一个全局主题样式配置可以在全局使用
  2.  想使用 echarts 的渐变色彩
- 准备尝试哪些措施
  1.  vue.config.js 文件中配置对应的主题文件
  2.  在 vue 原型上挂在 echarts, 以便在 echarts 配置单中通过 `new this.echarts.Xxx()` 的形式使用 echarts 上的构造方法

- 遇到了什么问题
  aMap 缩放和定位中心点不生效的问题
- 准备尝试哪些措施
  将封装的 aMap 组件 onload 处理逻辑临时去掉

- 遇到了什么问题
  1. 地图无法正常渲染
- 准备尝试哪些措施
  1. 常规调试
  2. 代码回滚测试
  3. 控制变量
  4. 怀疑浏览器的问题

- 遇到了什么问题

1. 地图卡顿的问题

- 准备尝试哪些措施

1. 排查是否因地图控件引起
2. 检查地图实例的销毁情况
3. default-passive-events
4. 告警信息窗影响
